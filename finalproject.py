import streamlit as st
import numpy as np
import pandas as pd
from PIL import Image
import random

st.title("Vitamin ScheduleğŸ’Š")

# Tabs
tab1, tab2, tab3 = st.tabs(["Homeâ¤ï¸", "ğŸ’¡ Info ", "ğŸ“ Schedule"])
data = np.random.randn(10, 1)

with tab1:
    greetings = [
        "You've got this! Stay strong, stay focused, and make today your masterpiece",
        "You're unstoppable! Embrace today's challenges, overcome obstacles, and thrive",
        "Believe in yourself! With determination and positivity, you can conquer anything",
        "Embrace the day! Your strength and resilience will lead you to success!",
        "You're amazing! Let your positivity shine and make each moment count!",
        "Be fearless! Face challenges with courage, and watch yourself soar!",
        "Stay bold! With passion and perseverance, you'll achieve greatness today!"
    ]
    
    image_file = [
        "happy1.jpeg",
        "happy2.jpg",
        "happy3.jpg"
    ]

    # Random selection
    random_greeting = random.choice(greetings)
    random_image_file = random.choice(image_file)
    st.title(f"""Hey there, busy bee!
    This one's for all you modern-day hustlers out there.
    {random_greeting}
    Let's power up with some vitamins and conquer the day together""")
    with open(random_image_file, "rb") as f:
        image = f.read()
    st.image(image, use_column_width=True)

with tab2:
    vitamin_details = {
        "ê¸€ë£¨íƒ€ì¹˜ì˜¨": "ê¸€ë£¨íƒ€ì¹˜ì˜¨ì€ í•­ì‚°í™” ì‘ìš©ì„ í•˜ëŠ” ë¬¼ì§ˆë¡œ, ê°„ í•´ë…ì„ ë•ê³  ë©´ì—­ë ¥ì„ ì¦ì§„ì‹œí‚¤ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.",
        "ë§ˆê·¸ë„¤ìŠ˜": "ë§ˆê·¸ë„¤ìŠ˜ì€ ê·¼ìœ¡ ì´ì™„ê³¼ ì‹ ê²½ ì „ë‹¬, ì—ë„ˆì§€ ìƒì„±ì— ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.",
        "ë°€í¬ì”¨ìŠ¬": "ë°€í¬ì”¨ìŠ¬ì€ ê°„ ê±´ê°•ì„ ì§€ì›í•˜ë©°, ê°„ ì„¸í¬ë¥¼ ë³´í˜¸í•˜ê³  ì¬ìƒì„ ì´‰ì§„í•˜ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.",
        "ë¹„íƒ€ë¯¼ A": "ë¹„íƒ€ë¯¼ AëŠ” ì‹œë ¥ ìœ ì§€ì™€ ë©´ì—­ ê¸°ëŠ¥ì— ì¤‘ìš”í•˜ë©°, í”¼ë¶€ ê±´ê°•ì„ ì´‰ì§„í•©ë‹ˆë‹¤.",
        "ë¹„íƒ€ë¯¼ B": "ë¹„íƒ€ë¯¼ Bêµ°ì€ ì—ë„ˆì§€ ëŒ€ì‚¬ì™€ ì‹ ê²½ ê¸°ëŠ¥ì— ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.",
        "ë¹„íƒ€ë¯¼ C": "ë¹„íƒ€ë¯¼ CëŠ” í•­ì‚°í™” ì‘ìš©ì„ í•˜ë©°, ë©´ì—­ë ¥ ì¦ì§„ê³¼ í”¼ë¶€ ê±´ê°•ì— ë„ì›€ì„ ì¤ë‹ˆë‹¤.",
        "ë¹„íƒ€ë¯¼ D": "ë¹„íƒ€ë¯¼ DëŠ” ì¹¼ìŠ˜ í¡ìˆ˜ë¥¼ ë„ì™€ ë¼ˆ ê±´ê°•ì„ ìœ ì§€í•˜ëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤.",
        "ì•„ë¥´ê¸°ë‹Œ": "ì•„ë¥´ê¸°ë‹Œì€ í˜ˆì•¡ ìˆœí™˜ì„ ê°œì„ í•˜ê³ , ì„±ì¥ í˜¸ë¥´ëª¬ ë¶„ë¹„ë¥¼ ì´‰ì§„í•©ë‹ˆë‹¤.",
        "ìœ ì‚°ê· ": "ìœ ì‚°ê· ì€ ì¥ ê±´ê°•ì„ ìœ ì§€í•˜ê³  ì†Œí™” ê¸°ëŠ¥ì„ ê°œì„ í•˜ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.",
        "ì´ì™¸íŠ¸í”¼": "ì´ì™¸íŠ¸í”¼ëŠ” ì „ë°˜ì ì¸ ê±´ê°• ì¦ì§„ì— ë„ì›€ì„ ì¤ë‹ˆë‹¤.",
        "ì˜¤ë©”ê°€-3": "ì˜¤ë©”ê°€-3ëŠ” ì‹¬í˜ˆê´€ ê±´ê°•ì„ ì§€ì›í•˜ê³  ì—¼ì¦ì„ ì¤„ì´ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.",
        "ì½”ì—”ìì„ Q10": "ì½”ì—”ìì„ Q10ì€ ì—ë„ˆì§€ ìƒì‚°ì„ ë„ì™€ í”¼ë¡œë¥¼ ì¤„ì´ê³ , ì‹¬ì¥ ê±´ê°•ì„ ì§€ì›í•©ë‹ˆë‹¤.",
        "ì¹¼ìŠ˜": "ì¹¼ìŠ˜ì€ ë¼ˆì™€ ì¹˜ì•„ ê±´ê°•ì„ ìœ ì§€í•˜ëŠ” ë° ì¤‘ìš”í•˜ë©°, ê·¼ìœ¡ ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤.",
        "ì² ë¶„": "ì² ë¶„ì€ í˜ˆì•¡ ìƒì„±ê³¼ ì‚°ì†Œ ìš´ë°˜ì— ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.",
        "í™ì‚¼": "í™ì‚¼ì€ ë©´ì—­ë ¥ ì¦ì§„ê³¼ í”¼ë¡œ íšŒë³µ, í˜ˆì•¡ ìˆœí™˜ ê°œì„ ì— ë„ì›€ì„ ì¤ë‹ˆë‹¤.",
        "ë£¨í…Œì¸": "ë£¨í…Œì¸ì€ ëˆˆ ê±´ê°•ì„ ìœ ì§€í•˜ê³  í™©ë°˜ ë³€ì„±ì„ ì˜ˆë°©í•˜ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.",
        "ë§ê°„": "ë§ê°„ì€ ë¼ˆ ê±´ê°•ê³¼ ì—ë„ˆì§€ ëŒ€ì‚¬ì— ì¤‘ìš”í•©ë‹ˆë‹¤.",
        "ì•„ì—°": "ì•„ì—°ì€ ë©´ì—­ ê¸°ëŠ¥ê³¼ ìƒì²˜ ì¹˜ìœ , ë‹¨ë°±ì§ˆ í•©ì„±ì— ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤."
    }
    
    vitamin_warnings = {
        "ê¸€ë£¨íƒ€ì¹˜ì˜¨": "ì£¼ì˜ì‚¬í•­: ì„ì‚°ë¶€ë‚˜ ìˆ˜ìœ  ì¤‘ì¸ ì—¬ì„±ì€ ì˜ì‚¬ì™€ ìƒì˜í•˜ì„¸ìš”.\në¶€ì‘ìš©: ìœ„ì¥ ì¥ì• ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "ë§ˆê·¸ë„¤ìŠ˜": "ì£¼ì˜ì‚¬í•­: ì‹ ì¥ ë¬¸ì œê°€ ìˆëŠ” ê²½ìš° í”¼í•˜ì„¸ìš”.\në¶€ì‘ìš©: ì„¤ì‚¬ë¥¼ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "ë°€í¬ì”¨ìŠ¬": "ì£¼ì˜ì‚¬í•­: ì•Œë ˆë¥´ê¸° ë°˜ì‘ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në¶€ì‘ìš©: ìœ„ì¥ ì¥ì• ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "ë¹„íƒ€ë¯¼ A": "ì£¼ì˜ì‚¬í•­: ê³¼ë‹¤ ë³µìš© ì‹œ ë…ì„±ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në¶€ì‘ìš©: ë‘í†µ, ì–´ì§€ëŸ¬ì›€ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "ë¹„íƒ€ë¯¼ B": "ì£¼ì˜ì‚¬í•­: ë³µìš© ì‹œ ê³¼ëŸ‰ì„ í”¼í•˜ì„¸ìš”.\në¶€ì‘ìš©: ê°„í—ì ì¸ ìœ„ì¥ ì¥ì• ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "ë¹„íƒ€ë¯¼ C": "ì£¼ì˜ì‚¬í•­: ì‹ ì¥ ê²°ì„ì˜ ìœ„í—˜ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në¶€ì‘ìš©: ì„¤ì‚¬ë¥¼ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "ë¹„íƒ€ë¯¼ D": "ì£¼ì˜ì‚¬í•­: ê³¼ë‹¤ ë³µìš© ì‹œ ê³ ì¹¼ìŠ˜í˜ˆì¦ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në¶€ì‘ìš©: ë©”ìŠ¤êº¼ì›€, êµ¬í† ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "ì•„ë¥´ê¸°ë‹Œ": "ì£¼ì˜ì‚¬í•­: ì‹¬ì¥ ì§ˆí™˜ì´ ìˆëŠ” ê²½ìš° í”¼í•˜ì„¸ìš”.\në¶€ì‘ìš©: ìœ„ì¥ ì¥ì• , ë‘í†µì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "ìœ ì‚°ê· ": "ì£¼ì˜ì‚¬í•­: ë©´ì—­ ì–µì œì œë¥¼ ë³µìš© ì¤‘ì¸ ê²½ìš° í”¼í•˜ì„¸ìš”.\në¶€ì‘ìš©: ë³µë¶€ íŒ½ë§Œê°ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "ì´ì™¸íŠ¸í”¼": "ì£¼ì˜ì‚¬í•­: íŠ¹ì • ì§ˆí™˜ì´ ìˆëŠ” ê²½ìš° ì˜ì‚¬ì™€ ìƒì˜í•˜ì„¸ìš”.\në¶€ì‘ìš©: ìœ„ì¥ ì¥ì• ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "ì˜¤ë©”ê°€-3": "ì£¼ì˜ì‚¬í•­: í˜ˆì•¡ í¬ì„ì œë¥¼ ë³µìš© ì¤‘ì¸ ê²½ìš° í”¼í•˜ì„¸ìš”.\në¶€ì‘ìš©: ë©”ìŠ¤êº¼ì›€, ì„¤ì‚¬ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "ì½”ì—”ìì„ Q10": "ì£¼ì˜ì‚¬í•­: í˜ˆì•• ê°•í•˜ì œë¥¼ ë³µìš© ì¤‘ì¸ ê²½ìš° í”¼í•˜ì„¸ìš”.\në¶€ì‘ìš©: ë³µë¶€ í†µì¦, ì„¤ì‚¬ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "ì¹¼ìŠ˜": "ì£¼ì˜ì‚¬í•­: ì‹ ì¥ ê²°ì„ì˜ ìœ„í—˜ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në¶€ì‘ìš©: ë³€ë¹„ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "ì² ë¶„": "ì£¼ì˜ì‚¬í•­: ê³¼ë‹¤ ë³µìš© ì‹œ ì¤‘ë…ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në¶€ì‘ìš©: ìœ„ì¥ ì¥ì• , ë³€ë¹„ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "í™ì‚¼": "ì£¼ì˜ì‚¬í•­: ê³ í˜ˆì••ì´ ìˆëŠ” ê²½ìš° í”¼í•˜ì„¸ìš”.\në¶€ì‘ìš©: ë¶ˆë©´ì¦, ë‘í†µì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "ë£¨í…Œì¸": "ì£¼ì˜ì‚¬í•­: ê³¼ëŸ‰ ë³µìš© ì‹œ ë¶€ì‘ìš©ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në¶€ì‘ìš©: ì†Œí™” ì¥ì• ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "ë§ê°„": "ì£¼ì˜ì‚¬í•­: ê³¼ëŸ‰ ë³µìš© ì‹œ ë…ì„±ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në¶€ì‘ìš©: ì‹ ê²½ ì¥ì• ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "ì•„ì—°": "ì£¼ì˜ì‚¬í•­: ê³¼ë‹¤ ë³µìš© ì‹œ ë©´ì—­ ê¸°ëŠ¥ ì €í•˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në¶€ì‘ìš©: ìœ„ì¥ ì¥ì• , ë©”ìŠ¤êº¼ì›€ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
    }

    st.divider()
    st.title("Vitamin's Info")
    st.caption("ì•Œê³ ì‹¶ì€ ì •ë³´ì˜ ì˜ì–‘ì œë¥¼ í´ë¦­í•´ë³´ì„¸ìš”ğŸ‘†")
    st.divider()

    info_text = st.empty()
    warning_text = st.empty()

    cols = st.columns(3)  # 3 columns

    for i, (vitamin, detail) in enumerate(vitamin_details.items()):
        col = cols[i % 3]
        if col.button(vitamin):
            info_text.text_area("ì˜ì–‘ì œ ì •ë³´", value=detail, height=150)
            warning_text.warning(vitamin_warnings[vitamin], icon="âš ï¸")

with tab3:
    vitamin_info = pd.DataFrame({
        "ì˜ì–‘ì œ": [
            "ê¸€ë£¨íƒ€ì¹˜ì˜¨", "ë§ˆê·¸ë„¤ìŠ˜", "ë°€í¬ì”¨ìŠ¬", "ë¹„íƒ€ë¯¼ A", "ë¹„íƒ€ë¯¼ B", "ë¹„íƒ€ë¯¼ C",
            "ë¹„íƒ€ë¯¼ D", "ì•„ë¥´ê¸°ë‹Œ", "ìœ ì‚°ê· ", "ì´ì™¸íŠ¸í”¼", "ì˜¤ë©”ê°€-3", "ì½”ì—”ìì„ Q10",
            "ì¹¼ìŠ˜", "ì² ë¶„", "í™ì‚¼", "ë£¨í…Œì¸", "ë§ê°„", "ì•„ì—°"
        ],
        "ì•„ì¹¨": ["1(ì‹ì „)", "x", "1(ì‹í›„)", "x", "1(ì‹í›„)", "1(ì‹í›„)", "1(ì‹í›„)", "1(ì‹í›„)", "1(ì‹ì „)", "1(ì‹í›„)", "x", "1(ì‹í›„)", "x", "1(ì‹ì „)", "1(ì‹í›„)", "1(ì‹í›„)", "1(ì‹í›„)", "x"],
        "ì ì‹¬": ["x", "x", "x", "x", "x", "x", "x", "x", "x", "x", "x", "x", "x", "x", "x", "x", "x", "x"],
        "ì €ë…": ["x", "1(ì‹í›„)", "1(ì‹í›„)", "1(ì‹í›„)", "x", "1(ì‹í›„)", "x", "1(ì‹í›„)", "x", "x", "1(ì‹í›„)", "x", "1(ì‹í›„)", "x", "x", "x", "x", "1(ì‹í›„)"]
    })

    selected_vitamins = st.sidebar.multiselect(
        "ë³µìš© ì¤‘ì¸ ì˜ì–‘ì œë¥¼ ì„ íƒí•˜ì„¸ìš”",
        vitamin_info["ì˜ì–‘ì œ"].tolist()
    )

    cols = st.columns([1, 1])  # Two equal columns for Create Schedule and Download buttons

    with cols[0]:
        create_button = st.button("Create Schedule")

    if create_button:
        if selected_vitamins:
            schedule = vitamin_info[vitamin_info["ì˜ì–‘ì œ"].isin(selected_vitamins)].set_index("ì˜ì–‘ì œ")

            st.write("ì˜¤ëŠ˜ í•˜ë£¨ì˜ ë¹„íƒ€ë¯¼ ìŠ¤ì¼€ì¤„:")
            st.dataframe(schedule, use_container_width=True)

            # Create textual summary
            morning_vitamins = schedule[schedule['ì•„ì¹¨'] != 'x']
            lunch_vitamins = schedule[schedule['ì ì‹¬'] != 'x']
            evening_vitamins = schedule[schedule['ì €ë…'] != 'x']

            def create_summary(vitamin_series):
                return ", ".join([f"{vitamin} ({dose})" for vitamin, dose in vitamin_series.items()])

            st.header("**MorningğŸŒ…**")
            st.write(f": {create_summary(morning_vitamins['ì•„ì¹¨'])}")

            st.header("**LunchğŸš**")
            st.write(f": {create_summary(lunch_vitamins['ì ì‹¬'])}")

            st.header("**EveningğŸŒ‰**")
            st.write(f": {create_summary(evening_vitamins['ì €ë…'])}")

            # Display the Download button in the second column
            with cols[1]:
                csv = schedule.to_csv(index=True).encode('utf-8')
                st.download_button(
                    label="Download",
                    data=csv,
                    file_name="schedule.csv",
                    mime="text/csv"
                )
            
        else:
            st.write("ì˜ì–‘ì œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.")
